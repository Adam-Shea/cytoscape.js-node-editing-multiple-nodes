!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cytoscapeNodeEditing=t():e.cytoscapeNodeEditing=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";var n,o,s,r,a,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=Math.max,s=Date.now||function(){return(new Date).getTime()},r=function(e,t,i){var n,r,a,h,u,c,p,f,g,l=0,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=t<0?0:+t||0,!0===i){var v=!0;y=!1}else g=void 0===(f=i)?"undefined":d(f),!f||"object"!=g&&"function"!=g||(v=!!i.leading,m="maxWait"in i&&o(+i.maxWait||0,t),y="trailing"in i?!!i.trailing:y);function b(t,i){i&&clearTimeout(i),r=c=p=void 0,t&&(l=s(),a=e.apply(u,n),c||r||(n=u=void 0))}function x(){var e=t-(s()-h);e<=0||e>t?b(p,r):c=setTimeout(x,e)}function C(){b(y,c)}function M(){if(n=arguments,h=s(),u=this,p=y&&(c||!v),!1===m)var i=v&&!c;else{r||v||(l=h);var o=m-(h-l),d=o<=0||o>m;d?(r&&(r=clearTimeout(r)),l=h,a=e.apply(u,n)):r||(r=setTimeout(C,o))}return d&&c?c=clearTimeout(c):c||t===m||(c=setTimeout(x,t)),i&&(d=!0,a=e.apply(u,n)),!d||c||r||(n=u=void 0),a}return M.cancel=function(){c&&clearTimeout(c),r&&clearTimeout(r),l=0,r=c=p=void 0},M},a=function(e,t,i){if(e&&t&&i){var n=0;e("core","nodeEditing",(function(e){var s,a,d,h=this;if("get"===e)return o(h,"api");var u=t.extend(!0,{padding:5,undoable:!0,grappleSize:8,grappleColor:"green",inactiveGrappleStroke:"inside 1px blue",boundingRectangleLineDash:[4,8],boundingRectangleLineColor:"red",boundingRectangleLineWidth:1.5,zIndex:999,moveSelectedNodesOnKeyEvents:function(){return!0},minWidth:function(e){var t=e.data("resizeMinWidth");return t||15},minHeight:function(e){var t=e.data("resizeMinHeight");return t||15},getCompoundMinWidth:function(e){return e.css("min-width")},getCompoundMinHeight:function(e){return e.css("min-height")},getCompoundMinWidthBiasRight:function(e){return e.css("min-width-bias-right")},getCompoundMinWidthBiasLeft:function(e){return e.css("min-width-bias-left")},getCompoundMinHeightBiasTop:function(e){return e.css("min-height-bias-top")},getCompoundMinHeightBiasBottom:function(e){return e.css("min-height-bias-bottom")},setWidth:function(e,t){e.css("width",t)},setHeight:function(e,t){e.css("height",t)},setCompoundMinWidth:function(e,t){e.css("min-width",t)},setCompoundMinHeight:function(e,t){e.css("min-height",t)},setCompoundMinWidthBiasLeft:function(e,t){e.css("min-width-bias-left",t)},setCompoundMinWidthBiasRight:function(e,t){e.css("min-width-bias-right",t)},setCompoundMinHeightBiasTop:function(e,t){e.css("min-height-bias-top",t)},setCompoundMinHeightBiasBottom:function(e,t){e.css("min-height-bias-bottom",t)},isFixedAspectRatioResizeMode:function(e){return e.is(".fixedAspectRatioResizeMode")},isNoResizeMode:function(e){return e.is(".noResizeMode, :parent")},isNoControlsMode:function(e){return e.is(".noControlsMode")},cursors:{default:"default",inactive:"not-allowed",nw:"nw-resize",n:"n-resize",ne:"ne-resize",e:"e-resize",se:"se-resize",s:"s-resize",sw:"sw-resize",w:"w-resize"},resizeToContentCueEnabled:function(e){return!0},resizeToContentFunction:void 0,resizeToContentCuePosition:"bottom-right",resizeToContentCueImage:"/node_modules/cytoscape-node-editing/resizeCue.svg"},e),c=t(h.container()),p="cy-node-edge-editing-stage"+n;n++;var f,g,l=t('<div id="'+p+'"></div>');c.find("#"+p).length<1&&c.append(l),(f=i.stages.length<n?new i.Stage({id:"node-edge-editing-stage",container:p,width:c.width(),height:c.height()}):i.stages[n-1]).getChildren().length<1?(g=new i.Layer,f.add(g)):g=f.getChildren()[0];var m=r((function(){l.attr("height",c.height()).attr("width",c.width()).css({position:"absolute",top:0,left:0,"z-index":u.zIndex}),setTimeout((function(){var e=l.offset(),t=c.offset();l.css({top:-(e.top-t.top),left:-(e.left-t.left)}),g.getStage().setWidth(c.width()),g.getStage().setHeight(c.height())}),0)}),250);m(),t(window).on("resize",m);var y=function(e){this.parent=e,this.boundingRectangle=new v(e);var t=["topleft","topcenter","topright","centerright","bottomright","bottomcenter","bottomleft","centerleft"];this.grapples=[];for(var i=0;i<t.length;i++){var n=t[i],o=!0;(u.isNoResizeMode(e)||u.isFixedAspectRatioResizeMode(e)&&n.indexOf("center")>=0)&&(o=!1),this.grapples.push(new b(e,this,n,o))}u.resizeToContentCueEnabled(e)&&!u.isNoResizeMode(e)&&(this.resizeCue=new x(e,this)),g.draw()};y.prototype.update=function(){this.boundingRectangle.update();for(var e=0;e<this.grapples.length;e++)this.grapples[e].update();var t=this.boundingRectangle.parent,i=u.resizeToContentCueEnabled(t);this.resizeCue&&i?this.resizeCue.update():this.resizeCue&&!i?(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue):!this.resizeCue&&i&&(this.resizeCue=new x(t,this)),g.draw()},y.prototype.remove=function(){this.boundingRectangle.shape.destroy(),delete this.boundingRectangle;for(var e=0;e<this.grapples.length;e++)this.grapples[e].unbindAllEvents(),this.grapples[e].shape.destroy();delete this.grapples,this.resizeCue&&(this.resizeCue.unbindEvents(),this.resizeCue.shape.destroy(),delete this.resizeCue),g.draw()};var v=function(e){this.parent=e,this.shape=null;var t=e.renderedPosition(),n=e.renderedOuterWidth()+T(),o=e.renderedOuterHeight()+T(),s={x:t.x-n/2,y:t.y-o/2},r=new i.Rect({x:s.x,y:s.y,width:n,height:o,stroke:u.boundingRectangleLineColor,strokeWidth:u.boundingRectangleLineWidth,dash:u.boundingRectangleLineDash});g.add(r),this.shape=r};v.prototype.update=function(){var e=this.parent.renderedPosition(),t=this.parent.renderedOuterWidth()+T(),i=this.parent.renderedOuterHeight()+T(),n={x:e.x-t/2,y:e.y-i/2};this.shape.x(n.x),this.shape.y(n.y),this.shape.width(t),this.shape.height(i)};var b=function(e,t,n,o){this.parent=e,this.location=n,this.isActive=o,this.resizeControls=t;var s=e.renderedPosition(),r=e.renderedOuterWidth()+T(),a=e.renderedOuterHeight()+T(),d={x:s.x-r/2,y:s.y-a/2},h=M(e);if(this.shape=new i.Rect({width:h,height:h}),this.isActive)this.shape.fill(u.grappleColor);else{var c=u.inactiveGrappleStroke.split(" "),p=c[2],f=parseInt(c[1].replace(/px/,""));this.shape.stroke(p),this.shape.strokeWidth(f)}this.updateShapePosition(d,r,a,h),g.add(this.shape),this.isActive?this.bindActiveEvents():this.bindInactiveEvents()};b.prototype.bindInactiveEvents=function(){var e=function e(t){h.boxSelectionEnabled(!0),h.panningEnabled(!0),h.autounselectify(!1),h.autoungrabify(!1),g.getStage().off("contentTouchend contentMouseup",e)};this.shape.on("mouseenter",(function(e){e.target.getStage().container().style.cursor=u.cursors.inactive})),this.shape.on("mouseleave",(function(e){null!=e.target.getStage()&&(e.target.getStage().container().style.cursor=u.cursors.default)})),this.shape.on("touchstart mousedown",(function(t){h.boxSelectionEnabled(!1),h.panningEnabled(!1),h.autounselectify(!0),h.autoungrabify(!0),g.getStage().on("contentTouchend contentMouseup",e)}))},b.prototype.bindActiveEvents=function(){var e,t,i,n,o,s,r=this,a=r.parent,d={},c={topleft:"nw",topcenter:"n",topright:"ne",centerright:"e",bottomright:"se",bottomcenter:"s",bottomleft:"sw",centerleft:"w"},p=function e(t){h.style().selector("core").style("active-bg-opacity",o).update(),r.shape.getStage().container().style.cursor=u.cursors.default,h.boxSelectionEnabled(!0),h.panningEnabled(!0),setTimeout((function(){h.autounselectify(!1),h.autoungrabify(!1)}),0),h.trigger("nodeediting.resizeend",[r.location,r.parent]),g.getStage().off("contentTouchend contentMouseup",e),g.getStage().off("contentTouchmove contentMousemove",f),r.shape.on("mouseenter",l),r.shape.on("mouseleave",m)},f=function(o){var c=r.shape.getStage().getPointerPosition(),p=c.x,f=c.y,g=(f-d.y)/h.zoom(),l=(p-d.x)/h.zoom(),m=r.location;h.batch((function(){var o=u.isFixedAspectRatioResizeMode(a);if(!(o&&m.indexOf("center")>=0||u.isNoResizeMode(a))){if(o){var r=n(a)/i(a),d=(Math.min(l,g),"topright"==m||"bottomleft"==m);l>g?g=l*r*(d?-1:1):l=g/r*(d?-1:1)}var h=a.position(),c=h.x,p=h.y,f=!1,y=!1,v=0,b=0,x=0,C=0;if(a.isParent()){var M=i(a)-s.w,w=n(a)-s.h;M>0&&(b=M-(v=M*parseFloat(u.getCompoundMinWidthBiasLeft(a))/(parseFloat(u.getCompoundMinWidthBiasLeft(a))+parseFloat(u.getCompoundMinWidthBiasRight(a))))),w>0&&(C=w-(x=w*parseFloat(u.getCompoundMinHeightBiasTop(a))/(parseFloat(u.getCompoundMinHeightBiasTop(a))+parseFloat(u.getCompoundMinHeightBiasBottom(a)))))}if(m.startsWith("top")){if(n(a)-g>u.minHeight(a)&&(!a.isParent()||x-g>=0))p=h.y+g/2,y=!0,t(a,n(a)-g);else if(o)return}else if(m.startsWith("bottom"))if(n(a)+g>u.minHeight(a)&&(!a.isParent()||C+g>=0))p=h.y+g/2,y=!0,t(a,n(a)+g);else if(o)return;if(m.endsWith("left")&&i(a)-l>u.minWidth(a)&&(!a.isParent()||v-l>=0)?(c=h.x+l/2,f=!0,e(a,i(a)-l)):m.endsWith("right")&&i(a)+l>u.minWidth(a)&&(!a.isParent()||b+l>=0)&&(c=h.x+l/2,f=!0,e(a,i(a)+l)),a.isParent()||!f&&!y||a.position({x:c,y:p}),a.isParent()){if(M=i(a)-s.w,w=n(a)-s.h,f&&M>0){m.endsWith("right")?b=M-v:m.endsWith("left")&&(v=M-b);var z=v/(v+b)*100,T=100-z;if(z<0||T<0)return;u.setCompoundMinWidthBiasLeft(a,z+"%"),u.setCompoundMinWidthBiasRight(a,T+"%")}if(y&&w>0){m.startsWith("top")?x=w-C:m.startsWith("bottom")&&(C=w-x);var W=x/(x+C)*100,S=100-W;if(W<0||S<0)return;u.setCompoundMinHeightBiasTop(a,W+"%"),u.setCompoundMinHeightBiasBottom(a,S+"%")}}}})),d.x=p,d.y=f,r.resizeControls.update(),h.trigger("nodeediting.resizedrag",[m,a])},l=function(e){e.target.getStage().container().style.cursor=u.cursors[c[r.location]]},m=function(e){null!=e.target.getStage()&&(e.target.getStage().container().style.cursor=u.cursors.default)};this.shape.on("mouseenter",l),this.shape.on("mouseleave",m),this.shape.on("touchstart mousedown",(function(y){s=a.children().boundingBox(),e=a.isParent()?u.setCompoundMinWidth:u.setWidth,t=a.isParent()?u.setCompoundMinHeight:u.setHeight,i=function(e){return e.isParent()?Math.max(parseFloat(u.getCompoundMinWidth(e)),s.w):e.width()},n=function(e){return e.isParent()?Math.max(parseFloat(u.getCompoundMinHeight(e)),s.h):e.height()},h.trigger("nodeediting.resizestart",[r.location,r.parent]),h.style()._private.coreStyle["active-bg-opacity"]&&(o=h.style()._private.coreStyle["active-bg-opacity"].value),h.style().selector("core").style("active-bg-opacity",0).update(),y.target.getStage().container().style.cursor=u.cursors[c[r.location]];var v=y.target.getStage().getPointerPosition();d.x=v.x,d.y=v.y,h.boxSelectionEnabled(!1),h.panningEnabled(!1),h.autounselectify(!0),h.autoungrabify(!0),r.shape.off("mouseenter",l),r.shape.off("mouseleave",m),g.getStage().on("contentTouchend contentMouseup",p),g.getStage().on("contentTouchmove contentMousemove",f)}))},b.prototype.update=function(){var e=this.parent.renderedPosition(),t=this.parent.renderedOuterWidth()+T(),i=this.parent.renderedOuterHeight()+T(),n={x:e.x-t/2,y:e.y-i/2},o=M(this.parent);this.shape.width(o),this.shape.height(o),this.updateShapePosition(n,t,i,o)},b.prototype.unbindAllEvents=function(){this.shape.off("mouseenter"),this.shape.off("mouseleave"),this.shape.off("touchstart mousedown")},b.prototype.updateShapePosition=function(e,t,i,n){switch(this.location){case"topleft":this.shape.x(e.x-n/2),this.shape.y(e.y-n/2);break;case"topcenter":this.shape.x(e.x+t/2-n/2),this.shape.y(e.y-n/2);break;case"topright":this.shape.x(e.x+t-n/2),this.shape.y(e.y-n/2);break;case"centerright":this.shape.x(e.x+t-n/2),this.shape.y(e.y+i/2-n/2);break;case"bottomright":this.shape.x(e.x+t-n/2),this.shape.y(e.y+i-n/2);break;case"bottomcenter":this.shape.x(e.x+t/2-n/2),this.shape.y(e.y+i-n/2);break;case"bottomleft":this.shape.x(e.x-n/2),this.shape.y(e.y+i-n/2);break;case"centerleft":this.shape.x(e.x-n/2),this.shape.y(e.y+i/2-n/2)}};var x=function(e,t){this.parent=e,this.resizeControls=t;var n=e.renderedPosition(),o=e.renderedOuterWidth()+T(),s=e.renderedOuterHeight()+T(),r={x:n.x-o/2,y:n.y-s/2},a=w(e),d=z(e),h=new Image;h.src=u.resizeToContentCueImage,this.shape=new i.Image({width:d,height:a,image:h}),h.onload=function(){g.draw()},this.updateShapePosition(r,o,s,d,a),this.bindEvents(),g.add(this.shape)};x.prototype.update=function(){var e=this.parent.renderedPosition(),t=this.parent.renderedOuterWidth()+T(),i=this.parent.renderedOuterHeight()+T(),n={x:e.x-t/2,y:e.y-i/2},o=w(this.parent),s=z(this.parent);this.shape.width(s),this.shape.height(o),this.updateShapePosition(n,t,i,s,o)},x.prototype.updateShapePosition=function(e,t,i,n,o){switch(u.resizeToContentCuePosition){case"top-left":this.shape.x(e.x+.4*n),this.shape.y(e.y+.4*o);break;case"top-right":this.shape.x(e.x+t-1.4*n),this.shape.y(e.y+.4*o);break;case"bottom-left":this.shape.x(e.x+.4*n),this.shape.y(e.y+i-1.4*o);break;default:this.shape.x(e.x+t-1.4*n),this.shape.y(e.y+i-1.4*o)}},x.prototype.bindEvents=function(){var e=this.parent,t=this;this.shape.on("click",(function(){"function"==typeof u.resizeToContentFunction?u.resizeToContentFunction([e]):h.undoRedo&&u.undoable?h.trigger("nodeediting.resizetocontent",[t]):W({self:t,firstTime:!0})}))},x.prototype.unbindEvents=function(){this.shape.off("click")};var C,M=function(e){return Math.max(1,h.zoom())*u.grappleSize*Math.min(e.width()/25,e.height()/25,1)},w=function(e){return Math.max(1,h.zoom())*u.grappleSize*1.25*Math.min(e.width()/25,e.height()/25,1)},z=function(e){return Math.max(1,h.zoom())*u.grappleSize*1.25*Math.min(e.width()/25,e.height()/25,1)},T=function(){return u.padding*Math.max(1,h.zoom())},W=function(e){var t=e.self.parent,i=t.isParent()?u.setCompoundMinWidth:u.setWidth,n=t.isParent()?u.setCompoundMinHeight:u.setHeight;if(e.firstTime){delete e.firstTime,e.oldWidth=t.width(),e.oldHeight=t.height();var o=document.createElement("canvas").getContext("2d"),s=t.style();o.font=s["font-size"]+" "+s["font-family"];var r=s.label.split("\n"),a=0,d=Math.max(1.1*o.measureText("M").width,30);if(r.forEach((function(e){var t=o.measureText(e).width;a<t&&(a=t)})),0!==a){if("function"==typeof u.isFixedAspectRatioResizeMode&&u.isFixedAspectRatioResizeMode(t)){var h=t.width()/t.height(),c=a<d?a:d*h,p=a<d?a/h:d;c>=a&&p>=d?(a=c,d=p):d=(a=a<d?d*h:a)<d?d:a/h}i(t,1.1*a),n(t,1.1*d)}return t.unselect(),e}var f=e.oldWidth,g=e.oldHeight;return e.oldWidth=t.width(),e.oldHeight=t.height(),i(t,f),n(t,g),t.unselect(),e};function S(e,t){var i=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].id()]=!0;return e.filter((function(e,i){"number"==typeof e&&(e=i);for(var n=e.parent()[0];null!=n;){if(t[n.id()])return!1;n=n.parent()[0]}return!0}))}(t);i.union(i.descendants()).positions((function(t,i){"number"==typeof t&&(t=i);var n=t.position("x"),o=t.position("y");return t.isParent()?{x:n,y:o}:{x:n+e.x,y:o+e.y}}))}var R,E,H=!1,P={37:!1,38:!1,39:!1,40:!1};function B(e){if("function"==typeof u.moveSelectedNodesOnKeyEvents?u.moveSelectedNodesOnKeyEvents():u.moveSelectedNodesOnKeyEvents){var t=document.activeElement.tagName;if("TEXTAREA"!=t&&"INPUT"!=t){switch(e.keyCode){case 37:case 39:case 38:case 40:case 32:e.preventDefault()}if(e.keyCode<37||e.keyCode>40)return;P[e.keyCode]=!0,e.preventDefault(),H||(C=h.nodes(":selected"),h.trigger("nodeediting.movestart",[C]),H=!0);var i=3;if(e.altKey&&e.shiftKey)return;e.altKey?i=1:e.shiftKey&&(i=10);var n=0,o=0;n+=P[39]?i:0,n-=P[37]?i:0,o+=P[40]?i:0,S({x:n,y:o-=P[38]?i:0},C)}}}function O(e){e.keyCode<"37"||e.keyCode>"40"||(e.preventDefault(),P[e.keyCode]=!1,("function"==typeof u.moveSelectedNodesOnKeyEvents?u.moveSelectedNodesOnKeyEvents():u.moveSelectedNodesOnKeyEvents)&&(h.trigger("nodeediting.moveend",[C]),C=void 0,H=!1))}if(R={x:void 0,y:void 0},E={x:0,y:0},h.on("unselect","node",a=function(e){R={x:void 0,y:void 0},E={x:0,y:0},s&&(s.remove(),s=null);var t=h.nodes(":selected");1==t.size()&&(s=new y(t))}),h.on("select","node",d=function(e){var t=e.target;s&&(s.remove(),s=null);var i=h.nodes(":selected");1!=i.size()||u.isNoControlsMode(t)||(s=new y(i))}),h.on("remove","node",(function(e){e.target.selected()&&a(e)})),h.on("add","node",(function(e){e.target.selected()&&d(e)})),h.on("position","node",(function(e){s&&(s.parent.position(),e.target.id()==s.parent.id()?s.update():E.x==R.x&&E.y==R.y||(E=s.parent.position(),s.update(),R={x:E.x,y:E.y}))})),h.on("zoom",(function(){s&&s.update()})),h.on("pan",(function(){s&&s.update()})),h.on("afterUndo afterRedo",(function(){s&&(s.update(),R={x:void 0,y:void 0})})),document.addEventListener("keydown",B,!0),document.addEventListener("keyup",O,!0),h.undoRedo&&u.undoable){var k,N;h.on("nodeediting.resizestart",(function(e,i,n){k={node:n,css:{}},n.isParent()?(k.css.minWidth=parseFloat(u.getCompoundMinWidth(n)),k.css.minHeight=parseFloat(u.getCompoundMinHeight(n)),k.css.biasLeft=u.getCompoundMinWidthBiasLeft(n),k.css.biasRight=u.getCompoundMinWidthBiasRight(n),k.css.biasTop=u.getCompoundMinHeightBiasTop(n),k.css.biasBottom=u.getCompoundMinHeightBiasBottom(n)):(k.css.width=n.width(),k.css.height=n.height(),k.position=t.extend({},n.position()))})),h.on("nodeediting.resizeend",(function(e,t,i){k.firstTime=!0,h.undoRedo().do("resize",k),k=void 0})),h.on("nodeediting.movestart",(function(e,t){null!=t[0]&&(N={firstTime:!0,firstNodePosition:{x:t[0].position("x"),y:t[0].position("y")},nodes:t})})),h.on("nodeediting.moveend",(function(e,t){if(null!=N){var i=N.firstNodePosition;N.positionDiff={x:-t[0].position("x")+i.x,y:-t[0].position("y")+i.y},delete N.firstNodePosition,h.undoRedo().do("nodeediting.move",N),N=void 0}})),h.on("nodeediting.resizetocontent",(function(e,t){var i={self:t,firstTime:!0};h.undoRedo().do("resizeToContent",i)}));var F=function(e){if(e.firstTime)return s&&s.update(),delete e.firstTime,e;var i=e.node,n={node:i,css:{}};return i.isParent()?(n.css.minWidth=parseFloat(u.getCompoundMinWidth(i)),n.css.minHeight=parseFloat(u.getCompoundMinHeight(i)),n.css.biasLeft=u.getCompoundMinWidthBiasLeft(i),n.css.biasRight=u.getCompoundMinWidthBiasRight(i),n.css.biasTop=u.getCompoundMinHeightBiasTop(i),n.css.biasBottom=u.getCompoundMinHeightBiasBottom(i)):(n.css.width=i.width(),n.css.height=i.height(),n.position=t.extend({},i.position())),h.startBatch(),i.isParent()?(u.setCompoundMinWidth(i,e.css.minWidth),u.setCompoundMinHeight(i,e.css.minHeight),u.setCompoundMinWidthBiasLeft(i,e.css.biasLeft),u.setCompoundMinWidthBiasRight(i,e.css.biasRight),u.setCompoundMinHeightBiasTop(i,e.css.biasTop),u.setCompoundMinHeightBiasBottom(i,e.css.biasBottom)):(i.position(e.position),u.setWidth(i,e.css.width),u.setHeight(i,e.css.height)),h.endBatch(),s&&s.update(),n},L=function(e){if(e.firstTime)return delete e.firstTime,e;var t=e.nodes,i=e.positionDiff,n={nodes:t,positionDiff:{x:-i.x,y:-i.y}};return S(i,t),n};h.undoRedo().action("resize",F,F),h.undoRedo().action("nodeediting.move",L,L),h.undoRedo().action("resizeToContent",W,W)}var A,j,K={refreshGrapples:function(){if(s){var e=s.parent;s.remove(),s=new y(e)}},removeGrapples:function(){s&&(s.remove(),s=null)}};return A="api",j=K,o(h)[A]=j,K}))}function o(e,t){void 0===e.scratch("_cyNodeEditing")&&e.scratch("_cyNodeEditing",{});var i=e.scratch("_cyNodeEditing");return void 0===t?i:i[t]}},e.exports&&(e.exports=a),void 0===(n=function(){return a}.call(t,i,t,e))||(e.exports=n),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&"undefined"!=typeof Konva&&a(cytoscape,jQuery,Konva)}])}));